@model EyeBoard.Models.BoardViewModel

@{
    ViewBag.Title = "EyeBoard";
}

@if (Model.Group.Id == new Guid("7819ead7-3bdd-4bb9-b224-6dc2d760efa1")) // Presentation Only
{
    <div>
        @Html.Partial("_PresentationWidget");
    </div>
}

@if (Model.Group.Id == new Guid("B80FFD7F-C50B-4E04-8B11-F2BEFFA307B3")) //Company Information
{
    <div class="row">
        <div class="col-9" style="height: 834px;">
            <div class="row">
                @Html.Partial("_PresentationWidget")
            </div>
        </div>
        <div class="col-3">
            <div class="row">
                <div class="col-12" style="height: 274px; display: table;">
                    @Html.Partial("_WeatherWidget")
                </div>
                <div class="col-12" style="height: 274px; display: table; background-color: gray;">
                    Vlak 3
                </div>
                <div class="col-12" style="height: 275px; display: table; background-color: darkgray;">
                    Vlak 4
                </div>
            </div>
        </div>
    </div>
    <div id="bottom1">
        @Html.Partial("_FeedWidget")
    </div>
    <div id="bottom2">
        @Html.Partial("_TickerWidget")
    </div>
}



@section scripts
{
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.4.0.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the the page.-->
    <script>
        $(function () {

            
            // SignalR Hub Handling
            // Reference the auto-generated proxy for the hub
            var screenHub = $.connection.screenHub;

            // Add events for the screen
            screenHub.client.updateGroup = function (id) {
                console.log("updated");
                refreshPresentations();
                refreshTicker();
            };

            // Start the connection
            $.connection.hub.start().done(function () {

            });
        });
    </script>
}
